<?xml version="1.0"?>
<launch>
  <arg name="bridge_name" default="ros_gz_bridge"/>
  <arg name="config_file" default="$(find-pkg-share description)/config/bridge_config.yaml"/>

  <!-- Robot Description -->
  <param name="robot_description" value="$(find-pkg-share description)/docky/urdf/docky.urdf"/>

  <!-- Robot State Publisher -->
  <node pkg="robot_state_publisher" exec="robot_state_publisher" name="robot_state_publisher" output="both">
    <param name="use_sim_time" value="true"/>
  </node>

  <!-- Start Gazebo Sim -->
  <executable cmd="gz sim -s libgazebo_ros_factory.so -s libgazebo_ros_state.so empty.sdf" output="screen"/>

  <!-- ROS-Gazebo Bridge -->
  <ros_gz_bridge bridge_name="$(var bridge_name)" config_file="$(var config_file)"/>

  <!-- Spawn the robot -->
  <node pkg="gazebo_ros" exec="spawn_entity.py" name="spawn_entity" output="screen"
        args="-topic robot_description -entity docky"/>

</launch> 